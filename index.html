
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Technical Journal</title>
  <meta name="author" content="davidad (David A. Dalrymple)">

  
  <meta name="description" content="In 2001, my favorite programming language was Python. In 2008, my favorite
programming language was Scheme. In 2014, my favorite programming language &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://davidad.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Technical Journal" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Technical Journal</a></h1>
  <h2>Stuff I <a href="http://hackerschool.com/">hack</a></h2>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:davidad.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/28/python-to-scheme-to-assembly-1/">Python to Scheme to Assembly, <br>Part 1: Recursion and Named Let</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-28T14:43:58-05:00" pubdate data-updated="true">Feb 28<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>In 2001, my favorite programming language was Python. In 2008, my favorite
programming language was Scheme. In 2014, my favorite programming language is
x64 assembly. For some reason, that progression tends to surprise people. Come
on a journey with me.</em></p>

<h2>Python</h2>

<p>In this article, we&rsquo;re going to consider a very simple toy problem: recursively
summing up a list of numbers<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>.</p>

<p><figure class='code'><div class='highlight'><table><tr><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div></pre></td><td class='main  python'><pre><div class='line'><code><span class="k">def</span> <span class="nf">sum_list</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
</code></div><div class='line'><code>  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</code></div><div class='line'><code>    <span class="k">return</span> <span class="mi">0</span>
</code></div><div class='line'><code>  <span class="k">else</span><span class="p">:</span>
</code></div><div class='line'><code>    <span class="k">return</span> <span class="nb">list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">sum_list</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</code></div></pre></td></tr></table></div></figure></p>

<blockquote><pre><code> &gt;&gt;&gt; sum_list(range(101))
 5050
</code></pre></blockquote>

<p><a href="http://en.wikipedia.org/wiki/Carl_Friedrich_Gauss#Anecdotes">Young Carl Gauss</a>
would be proud.</p>

<blockquote><pre><code> &gt;&gt;&gt; sum_list(range(1001))
 RuntimeError: maximum recursion depth exceeded
</code></pre>

<p>Oops.</p></blockquote>

<p>Young programmers often learn from this type of experience that recursion
<em>sucks</em>. (Or, as a modern young programmer might say, it <em>doesn&rsquo;t scale</em>.) If
they Google around a bit, they might find the following &ldquo;solution&rdquo;:</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/28/python-to-scheme-to-assembly-1/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/25/overkilling-the-8-queens-problem/">Overkilling the 8-queens problem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-25T10:52:57-05:00" pubdate data-updated="true">Feb 25<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last night, a fellow <a href="http://www.hackerschool.com">Hacker School</a>er challenged
me to a running-time contest on the classic <a href="http://en.wikipedia.org/wiki/Eight_queens_puzzle">eight queens
puzzle</a>. Naturally, I pulled
up my trusty <a href="http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-manual-325462.pdf">IntelÂ® 64
manual</a>
and got to work. It turned out to be even faster than I expected, churning out
pretty-printed output in 15ms, which is totally dominated by the time it takes
the terminal to display it (it takes only 2ms if redirected to a file).</p>

<p><strong>Update</strong>: Very slightly more scientific
<a href="https://github.com/davidad/8queens/tree/%2Bc_comparison">testing</a>, spurred by
curious <a href="https://news.ycombinator.com/item?id=7301913">Hacker News commenters</a>,
indicates that, without pretty-printing and other overhead, the solving time is
actually closer to 11.2&#181;s &mdash; about a factor of 7 speedup over commenter
<a href="https://news.ycombinator.com/item?id=7302005">bluecalm</a>&rsquo;s <a href="https://github.com/davidad/8queens/blob/%2Bc_comparison/8q_C_bluecalm.c">C
implementation</a>.</p>

<p><img src="http://i.imgur.com/5dOH49e.png" alt="pretty-printed output" /></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/25/overkilling-the-8-queens-problem/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/19/relocatable-vs-position-independent-code-or/">Relocatable vs. Position-Independent Code (or, Virtual Memory isn't Just For Swap)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-19T17:12:50-05:00" pubdate data-updated="true">Feb 19<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p><strong>Myth</strong>: &ldquo;Virtual memory&rdquo; is the mechanism that a kernel uses to make more
memory available than is actually physically installed, by setting aside a
disk partition for the overflow and copying pages between memory and disk as
needed.</p></blockquote>

<p>I acquired this belief very early in my programming career, but it turns out
that swapping pages to disk is merely one of the many things that &ldquo;virtual
memory&rdquo; makes possible.</p>

<blockquote><p><strong>Fact</strong>: &ldquo;Virtual memory&rdquo; is a <em>hardware</em> (CPU) mechanism, which, every
single time memory is accessed, references a kernel-specified data structure
called a &ldquo;page table&rdquo; to arbitrarily
<a href="http://www.catb.org/jargon/html/F/frobnicate.html">frobnicate</a> the high bits
of the address, which is called &ldquo;translating&rdquo; from a &ldquo;linear address&rdquo; to a
&ldquo;physical address&rdquo;. (The page table gets cached by a <a href="http://en.wikipedia.org/wiki/Translation_lookaside_buffer">translation lookaside
buffer</a>, so the
lookup is usually quite efficient!)</p></blockquote>

<p>This fact became very real to me this week as I made a <a href="/blog/2014/02/18/kernel-from-scratch/">kernel from
scratch</a>: I was moderately surprised
that I <em>needed</em> to set up a page table, when I had always thought of virtual
memory as a somewhat advanced kernel feature. Today, I learned how &ldquo;relocatable&rdquo;
and &ldquo;PIC&rdquo; &mdash; terms I&rsquo;d encountered in the past and never really understood &mdash;
suddenly make sense in this context.  </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/19/relocatable-vs-position-independent-code-or/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/18/kernel-from-scratch/">Kernel from Scratch</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-18T02:58:08-05:00" pubdate data-updated="true">Feb 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of my 3 major goals for Hacker School was to create a bootable, 64-bit
kernel image from scratch, using only <code>nasm</code> and my text editor. Well, folks,
one down, two to go.</p>

<p><img src="http://i.imgur.com/vnYFaFZ.png" alt="Hello, kernel!" /></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/18/kernel-from-scratch/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/11/octopress-workflow/">Octopress workflow</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-11T18:10:58-05:00" pubdate data-updated="true">Feb 11<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today is my second day at <a href="http://hackerschool.com">Hacker School</a>, and I
decided to set up a little bit of tooling for blogging about what I do here.
The first tool I set up (following the recommendations of many Hacker Schoolers
and alums) was <a href="http://octopress.org">Octopress</a>, a static site generator
designed for <a href="pages.github.com">GitHub Pages</a> and implemented atop
<a href="http://jekyllrb.com">Jekyll</a>. (The page you&rsquo;re reading right now is
Octopress-generated.) I followed the admirably thorough Octopress documentation
for <a href="http://octopress.org/docs/setup/">installation</a>, <a href="http://octopress.org/docs/configuring/">initial
configuration</a>, <a href="http://octopress.org/docs/deploying/github/">deployment with Github
Pages</a>, and <a href="http://octopress.org/docs/theme/">theme
customization</a><sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>. But I wanted even more
convenience. So, I&rsquo;m here to introduce you to the <code>blog</code> command (the same one
I used to write this very post).</p>

<pre><code>davidad@zayin ~/octopress&gt; blog
Enter a title for your post:
</code></pre>

<p><code>blog</code> is a <code>bash</code> script, pretty specific to my own setup (vim, chrome, OSX),
but it could be adapted to other environments. </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/11/octopress-workflow/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/28/python-to-scheme-to-assembly-1/">Python to Scheme to Assembly, <br>Part 1: Recursion and Named Let</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/25/overkilling-the-8-queens-problem/">Overkilling the 8-queens problem</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/19/relocatable-vs-position-independent-code-or/">Relocatable vs. Position-Independent Code (or, Virtual Memory isn't Just For Swap)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/18/kernel-from-scratch/">Kernel from Scratch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/11/octopress-workflow/">Octopress workflow</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/davidad">@davidad</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'davidad',
            count: 10,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
Copyright &copy; 2014 - <a href="http://davidad.org">davidad</a> (David A. Dalrymple) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<a class="davidadlink" href="http://davidad.org" target="_blank"><div>a <span>davidad</span> production</div></a>


</body>
</html>
