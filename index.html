
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Technical Journal</title>
  <meta name="author" content="davidad (David A. Dalrymple)">

  
  <meta name="description" content="Thanks to fellow Hacker Schooler Leah Steinberg for inspiring this post! Having intermittently struggled with apache2 configuration files for nearly &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://davidad.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Technical Journal" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,http://drz.ac/javascripts/MathJaxLocal.js">
</script>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Technical Journal</a></h1>
  <h2>Stuff I <a href="http://hackerschool.com/">hack</a></h2>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:davidad.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/06/minimal-nginx-configuration/">Getting started with nginx configuration</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-06T20:05:53-04:00" pubdate data-updated="true">Apr 6<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Thanks to fellow <a href="http://hackerschool.com">Hacker School</a>er Leah Steinberg for inspiring this post!</em></p>
<hr />
<p>Having intermittently struggled with <code>apache2</code> configuration files for nearly half of my adult life, I find <code>nginx</code> an absolute joy to set up. I’m completely sincere about that. But, for those who are just getting into Web development, <code>nginx</code> is just about as much of a struggle as Apache used to be—in fact, probably more so, because there’s less abundant learning materials out there on the Internet.</p>
<p>So, here’s an attempt to make that situation just the slightest bit better.</p>
<p>If you don’t already have <code>nginx</code> installed, I encourage you to follow <a href="http://openresty.org/#Installation">these directions</a> for building <a href="http://openresty.org/">OpenResty</a>, an enhanced version of <code>nginx</code> that enables building entire Web apps within the <code>nginx</code> process using the beautiful programming language <a href="http://en.wikipedia.org/wiki/Lua_(programming_language)#Features">Lua</a>.</p>
<p>But, from here on, I’m going to assume that you already have a stock version of <code>nginx</code> installed. Verify that if you run</p>
<pre><code>$ nginx -v</code></pre>
<p>you get some kind of reasonable response, like</p>
<pre><code>nginx version: nginx/1.2.3</code></pre>
<p>Success!</p>
<p>Now, make a file called <code>hi.conf</code>:</p>
<figure class='code'><figcaption>
hi.conf
</figcaption><div class='highlight'><table><tr><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div><div data-line='12' class='line-number'></div></pre></td><td class='main  nginx'><pre><div class='line'><code><span class="k">error_log</span> <span class="s">stderr</span><span class="p">;</span>
</code></div><div class='line'><code><span class="k">pid</span> <span class="s">nginx.pid</span><span class="p">;</span>
</code></div><div class='line'><code><span class="k">http</span> <span class="p">{</span>
</code></div><div class='line'><code>    <span class="kn">access_log</span> <span class="no">off</span><span class="p">;</span>
</code></div><div class='line'><code>    <span class="kn">server</span> <span class="p">{</span>
</code></div><div class='line'><code>        <span class="kn">listen</span> <span class="mi">4945</span><span class="p">;</span>
</code></div><div class='line'><code>        <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</code></div><div class='line'><code>            <span class="kn">return</span> <span class="mi">200</span><span class="p">;</span>
</code></div><div class='line'><code>        <span class="p">}</span>
</code></div><div class='line'><code>    <span class="p">}</span>
</code></div><div class='line'><code><span class="p">}</span>
</code></div><div class='line'><code><span class="k">events</span> <span class="p">{}</span>
</code></div></pre></td></tr></table></div></figure>


<p>I’ve chosen the number 4945 so as to hopefully not conflict with any services that may already be running on your machine for one reason or another. Now, let’s launch <code>nginx</code> using this configuration file and test it:</p>
<pre><code>$ nginx -p `pwd`/ -c hi.conf
nginx: [alert] could not open error log file: open() &quot;/var/log/nginx/error.log&quot; failed (13: Permission denied)
$ telnet localhost 4945
Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;^]&#39;.
GET / HTTP/1.0

HTTP/1.1 200 OK
Server: nginx/1.2.3
Date: Mon, 07 Apr 2014 01:50:28 GMT
Content-Type: text/plain
Content-Length: 0
Connection: close

Connection closed by foreign host.
$ kill -QUIT `cat nginx.pid`</code></pre>
<p>You’ll have to actually enter the line <code>GET / HTTP/1.0</code>. HTTP is a protocol intended for humans to be able to read and write, and you may as well take advantage of it! Of course, you could also navigate to <code>http://localhost:4945/</code> in a browser, but then all you see is a blank page, which is not quite as satisfying (to me, at least) as a <code>200 OK</code> on the terminal<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>.</p>
<hr />
<p>What’s that? You want to actually serve data, and not just a blank page?</p>
<figure class='code'><figcaption>
hi2.conf
</figcaption><div class='highlight'><table><tr><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div><div data-line='12' class='line-number'></div><div data-line='13' class='line-number'></div></pre></td><td class='main  nginx'><pre><div class='line'><code><span class="k">error_log</span> <span class="s">stderr</span><span class="p">;</span>
</code></div><div class='line'><code><span class="k">pid</span> <span class="s">nginx.pid</span><span class="p">;</span>
</code></div><div class='line'><code><span class="k">http</span> <span class="p">{</span>
</code></div><div class='line'><code>    <span class="kn">access_log</span> <span class="no">off</span><span class="p">;</span>
</code></div><div class='line'><code>    <span class="kn">root</span> <span class="s">.</span><span class="p">;</span>
</code></div><div class='line'><code>    <span class="kn">server</span> <span class="p">{</span>
</code></div><div class='line'><code>        <span class="kn">listen</span> <span class="mi">4945</span><span class="p">;</span>
</code></div><div class='line'><code>        <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</code></div><div class='line'><code>            <span class="kn">try_files</span> <span class="s">/index.html</span> <span class="p">=</span><span class="mi">404</span><span class="p">;</span>
</code></div><div class='line'><code>        <span class="p">}</span>
</code></div><div class='line'><code>    <span class="p">}</span>
</code></div><div class='line'><code><span class="p">}</span>
</code></div><div class='line'><code><span class="k">events</span> <span class="p">{}</span>
</code></div></pre></td></tr></table></div></figure>


<p>Then just drop an <code>index.html</code> into the same folder as <code>hi2.conf</code> and run</p>
<pre><code>$ nginx -p `pwd`/ -c hi2.conf</code></pre>
<p>Now you should be able to load <code>http://localhost:4945/</code> and see what you wrote in <code>index.html</code>. Exciting!</p>
<h2 id="next-steps">Next Steps</h2>
<p>If you installed OpenResty, continue with their <a href="http://openresty.org/#GettingStarted">Getting Started</a>. Otherwise, I’ll leave you to other tutorials, or to <a href="http://nginx.org/en/docs/dirindex.html">the actual <code>nginx</code> documentation</a> – this was really just an exercise in getting something to work. But, I will offer this advice: I recommend against using any of your OS’s magic, like special files and folders where things are supposed to be put, or special incantations for invoking <code>nginx</code>. Just run <code>nginx</code> on the command line. It’s a smart enough program to <strong>stay</strong> running once you’ve started it, without the help of external infrastructure, and I think you’ll be much less frustrated working with it directly, having all the relevant files in one project directory, than struggling to configure both <code>nginx</code> itself and your OS’s favorite mechanism for managing server processes. Once you’ve figured out how to disable the OS’s auto-server-starting mechanisms, you can modify the <code>listen</code> line to <code>listen 80</code> so you can stop typing that pesky <code>:4945</code> in the browser.</p>
<h3 id="reloading">Reloading</h3>
<p>Oh, and one last trick: if you want to ask <code>nginx</code> to reload its configuration file without actually bringing down the server, just</p>
<pre><code>$ kill -HUP `cat nginx.pid`</code></pre>
<p>Happy hacking!</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>200 is the HTTP status code meaning “OK”, the status that accompanies most successful HTTP replies on the Web. As you might guess, that’s the same 200 referred to by the line <code>return 200</code> in <code>hi.conf</code>.<a href="#fnref1">↩</a></p></li>
</ol>
</section></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/30/vnc-as-an-interface/">VNC as a graphical interface medium</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-30T19:21:34-04:00" pubdate data-updated="true">Mar 30<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The <a href="http://en.wikipedia.org/wiki/Virtual_Network_Computing">Virtual Network Computing (VNC)</a> system for accessing the GUI environments of remote computers uses a protocol called <a href="http://en.wikipedia.org/wiki/RFB_protocol">Remote Frame Buffer (RFB)</a> to exchange data about graphics output as well as keyboard and mouse input. RFB turns out to be a very sane protocol (specification PDF <a href="http://www.realvnc.com/docs/rfbproto.pdf">here</a>) compared with X11, and infinitely more sane than Cocoa (which requires the ObjC runtime) or Win32 (no explanation needed). So, I thought, why not just expose a program’s graphical interface as a VNC server? Then we can let a VNC client deal with the vagaries of the host windowing environment, and we only need to speak a well-specified protocol on a socket.</p>
<p>So far, this is what I have to show (<a href="https://github.com/davidad/vnchacks">code on github</a>):<br /><img src="/assets/color_rotate.gif" /></p>
</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/03/30/vnc-as-an-interface/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/23/concurrency-primitives-in-intel-64-assembly/">Concurrency Primitives in Intel 64 Assembly</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-23T20:36:47-04:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Now that nearly every computer has some form of multi-processing (that is, multiple CPUs sharing a single address space), some high-level languages are starting to get attention for their concurrency features. Many languages refer to such features as “concurrency primitives.” But since these are high-level languages, we know that these “primitives” must ultimately be implemented with hardware operations. Older high-level languages, like C, don’t have baked-in support for such operations – not because such languages are lower-level, but simply because the operations in question <em>weren’t a thing</em> when C was invented. Assembly language, being up to date with the latest CPU capabilities by definition<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, should provide the best window into the true nature of today’s concurrency operations.</p>
<p>In this post I’m going to walk you through a (relatively) simple concurrent assembly program which runs on OSX or Linux. Here’s the demo (<a href="https://github.com/davidad/asm_concurrency">github</a>):</p>
<pre><code>bash-3.2$ time ./concurrency-noprint-x1 foo    # single-worker version

real  0m1.458s
user  0m1.445s
sys   0m0.010s
bash-3.2$ # now run two at once
bash-3.2$ time ./concurrency-noprint-x1 foo-2 &amp; ./concurrency-noprint-x1 foo-2
[1] 71366

real  0m0.785s
user  0m0.780s
sys   0m0.001s
[1]+  Done                    time ./concurrency-noprint-x1 foo-2
bash-3.2$ time ./concurrency-noprint-x4 foo-3  # four-worker version

real  0m0.417s
user  0m0.413s
sys   0m0.003s
bash-3.2$ time ./concurrency-noprint-x7 foo-4  # seven-worker version

real  0m0.295s
user  0m0.283s
sys   0m0.001s
bash-3.2$ diff -s --from-file=foo foo-*
Files foo and foo-2 are identical
Files foo and foo-3 are identical
Files foo and foo-4 are identical</code></pre>
</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/03/23/concurrency-primitives-in-intel-64-assembly/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/16/infosec-the-product-design-correspondence/">The Security/Product Design Correspondence</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-16T09:55:30-04:00" pubdate data-updated="true">Mar 16<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>General disclaimer for InfoSec articles:</strong> <em>Reading this article does not qualify you to design secure systems. Writing this article does not qualify </em>me <em>to design secure systems. In fact, </em>nobody is qualified to design secure systems<em>. A system should not be considered secure unless it has been reviewed by multiple security experts </em>and <em>resisted multiple serious attempts to violate its security claims in practice. The information contained in this article is offered “as is” and without warranties of any kind (express, implied, and statutory), all of which the author expressly disclaims to the fullest extent permitted by law.</em></p>
<hr />
<blockquote>
<p>If programming is the art of adding functionality to computers, security is the art of removing it.</p>
</blockquote>
<p>This maxim is a bit unfair to deep and wonderful world of information security (InfoSec), but it has a point. A lot of essential concepts in InfoSec have natural opposites in software product design.</p>
<p>Let’s start at the top. Every professional software project begins with specifications. In product design, the specifications are called <strong>use cases</strong>: stories about an external agent who wants to perform some function, and how they would go about performing the function using your software. In InfoSec, the specifications are called <strong>threats</strong>. These are also stories about an external agent who wants to perform some function, and how would go about performing the function using your software. The difference is, in product design, you want to make the agent’s job <em>as easy as possible</em>, while in InfoSec, you want to make it as <em>hard</em> as possible. We also have these related correspondences: </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/03/16/infosec-the-product-design-correspondence/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/12/the-operating-system-is-out-of-date/">Systems Past: the only 8 software innovations we actually use</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-12T19:21:49-04:00" pubdate data-updated="true">Mar 12<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Note: This is a position piece, not a technical article. Hat tip to <a href="https://twitter.com/_JacobJacob">Jake Skelcy</a> for requesting such a piece.</em></p>
<p>Computers didn’t always have operating systems. The earliest machines, like the <a href="http://en.wikipedia.org/wiki/Harvard_Mark_I">Harvard Mark I</a> and the <a href="http://en.wikipedia.org/wiki/EDVAC">EDVAC</a>, performed one “computation” at a time. Whenever a computation finished, with its output printed by a teletypewriter or recorded on a magnetic tape, the machine would shut down. A person would then have to notice the machine stopped, unload the output, set up a new computation by manually loading the input and program instructions, and finally, press the <strong>start button</strong> to get the machine cranking again. On the Harvard Mark I, for instance, restarting would involve separately turning on multiple electric motors and then pressing a button marked MAIN SEQUENCE.</p>
<p><a href="http://commons.wikimedia.org/wiki/File:Harvard_Mark_I_Computer_-_Input-Output_Details.jpg"><img src="http://upload.wikimedia.org/wikipedia/commons/0/07/Harvard_Mark_I_Computer_-_Input-Output_Details.jpg" alt="The control panel of the Harvard Mark I." /></a></p>
<p><strong>This is the context in which the programming language (PL) and the operating system (OS) were invented. The year was 1955. Almost everything since then has been window dressing</strong> (so to speak). In this essay, I’m going to tell you my perspective on the PL and the OS, and the six other things since then which I consider significant improvements, which have made it into software practice, and which are neither algorithms nor data structures (but rather system concepts). Despite those and other incremental changes, to this day<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, we work exclusively<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> within software environments which can definitely be considered programming languages and operating systems, in exactly the same sense as those phrases were used almost 60 years ago. My position is:</p>
<ul>
<li>Frankly, this is backward, and we ought to admit it.</li>
<li>Most of this stuff was invented by people who had a lot less knowledge and experience with computing than we have accumulated today. <strong>All</strong> of it was <strong>invented by people</strong>: mortal, fallible humans like you and me who were just trying to make something work. With a solid historical perspective we can dare to do better. </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/03/12/the-operating-system-is-out-of-date/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/10/how-i-think-about-math-relations/">How I Think About Math, <br/>Lecture 1: Relations</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-10T11:05:40-04:00" pubdate data-updated="true">Mar 10<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="/assets/20140306.pdf">See the slides (PDF)</a>. (You may want to use your PDF viewer’s presentation mode; there are a lot of pseudo-animations that could get annoying to scroll through.)</p>
<p><strong>Update</strong>: Today, I drew up the <a href="/assets/20140310.pdf">field axioms</a> in this notation. I’m almost to the point where I can define linearity!</p>
<hr />
<p>Last week at <a href="http://www.hackerschool.com">Hacker School</a>, I floated the idea of giving a presentation about linear algebra. Over a decade after taking it in college, I finally feel like I understand linear algebra well enough to express clearly, to an audience of programmers, most of the concepts from linear algebra that they might find useful.</p>
<p>I figured the very first thing to present would be the concept of <em>linearity</em> itself. After all, a <strong>linear operator</strong> is just any operator that commutes with addition and scalar multiplication. But wait– what is “commuting”? </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/03/10/how-i-think-about-math-relations/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/28/python-to-scheme-to-assembly-1/">Python to Scheme to Assembly, <br>Part 1: Recursion and Named Let</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-28T14:43:58-05:00" pubdate data-updated="true">Feb 28<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>In 2001, my favorite programming language was Python. In 2008, my favorite programming language was Scheme. In 2014, my favorite programming language is x64 assembly. For some reason, that progression tends to surprise people. Come on a journey with me.</em></p>
<h2 id="python">Python</h2>
<p>In this article, we’re going to consider a very simple toy problem: recursively summing up a list of numbers<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>.</p>
<figure class='code'><div class='highlight'><table><tr><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div></pre></td><td class='main  python'><pre><div class='line'><code><span class="k">def</span> <span class="nf">sum_list</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
</code></div><div class='line'><code>  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</code></div><div class='line'><code>    <span class="k">return</span> <span class="mi">0</span>
</code></div><div class='line'><code>  <span class="k">else</span><span class="p">:</span>
</code></div><div class='line'><code>    <span class="k">return</span> <span class="nb">list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">sum_list</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</code></div></pre></td></tr></table></div></figure>


<blockquote>
<pre><code> &gt;&gt;&gt; sum_list(range(101))
 5050</code></pre>
</blockquote>
<p><a href="http://en.wikipedia.org/wiki/Carl_Friedrich_Gauss#Anecdotes">Young Carl Gauss</a> would be proud.</p>
<blockquote>
<pre><code> &gt;&gt;&gt; sum_list(range(1001))
 RuntimeError: maximum recursion depth exceeded</code></pre>
<p>Oops.</p>
</blockquote>
<p>Young programmers often learn from this type of experience that recursion <em>sucks</em>. (Or, as a modern young programmer might say, it <em>doesn’t scale</em>.) If they Google around a bit, they might find the following “solution”: </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/28/python-to-scheme-to-assembly-1/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/25/overkilling-the-8-queens-problem/">Overkilling the 8-queens problem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-25T10:52:57-05:00" pubdate data-updated="true">Feb 25<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last night, a fellow <a href="http://www.hackerschool.com">Hacker School</a>er challenged me to a running-time contest on the classic <a href="http://en.wikipedia.org/wiki/Eight_queens_puzzle">eight queens puzzle</a>. Naturally, I pulled up my trusty <a href="http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-manual-325462.pdf">Intel® 64 manual</a> and got to work. It turned out to be even faster than I expected, churning out pretty-printed output in 15ms, which is totally dominated by the time it takes the terminal to display it (it takes only 2ms if redirected to a file).</p>
<p><strong>Update</strong>: Very slightly more scientific <a href="https://github.com/davidad/8queens/tree/%2Bc_comparison">testing</a>, spurred by curious <a href="https://news.ycombinator.com/item?id=7301913">Hacker News commenters</a>, indicates that, without pretty-printing and other overhead, the solving time is actually closer to 11.2µs – about a factor of 7 speedup over commenter <a href="https://news.ycombinator.com/item?id=7302005">bluecalm</a>’s <a href="https://github.com/davidad/8queens/blob/%2Bc_comparison/8q_C_bluecalm.c">C implementation</a>.</p>
<figure>
<img src="http://i.imgur.com/5dOH49e.png" alt="pretty-printed output" /><figcaption>pretty-printed output</figcaption>
</figure>
</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/25/overkilling-the-8-queens-problem/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/19/relocatable-vs-position-independent-code-or/">Relocatable vs. Position-Independent Code (or, Virtual Memory isn't Just For Swap)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-19T17:12:50-05:00" pubdate data-updated="true">Feb 19<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>
<p><strong>Myth</strong>: “Virtual memory” is the mechanism that a kernel uses to make more memory available than is actually physically installed, by setting aside a disk partition for the overflow and copying pages between memory and disk as needed.</p>
</blockquote>
<p>I acquired this belief very early in my programming career, but it turns out that swapping pages to disk is merely one of the many things that “virtual memory” makes possible.</p>
<blockquote>
<p><strong>Fact</strong>: “Virtual memory” is a <em>hardware</em> (CPU) mechanism, which, every single time memory is accessed, references a kernel-specified data structure called a “page table” to arbitrarily <a href="http://www.catb.org/jargon/html/F/frobnicate.html">frobnicate</a> the high bits of the address, which is called “translating” from a “linear address” to a “physical address”. (The page table gets cached by a <a href="http://en.wikipedia.org/wiki/Translation_lookaside_buffer">translation lookaside buffer</a>, so the lookup is usually quite efficient!)</p>
</blockquote>
<p>This fact became very real to me this week as I made a <a href="/blog/2014/02/18/kernel-from-scratch/">kernel from scratch</a>: I was moderately surprised that I <em>needed</em> to set up a page table, when I had always thought of virtual memory as a somewhat advanced kernel feature. Today, I learned how “relocatable” and “PIC” – terms I’d encountered in the past and never really understood – suddenly make sense in this context. </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/19/relocatable-vs-position-independent-code-or/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/18/kernel-from-scratch/">Kernel from Scratch</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-18T02:58:08-05:00" pubdate data-updated="true">Feb 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of my 3 major goals for Hacker School was to create a bootable, 64-bit kernel image from scratch, using only <code>nasm</code> and my text editor. Well, folks, one down, two to go.</p>
<p><img src="http://i.imgur.com/vnYFaFZ.png" alt="Hello, kernel!" /> </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/18/kernel-from-scratch/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/06/minimal-nginx-configuration/">Getting started with nginx configuration</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/30/vnc-as-an-interface/">VNC as a graphical interface medium</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/23/concurrency-primitives-in-intel-64-assembly/">Concurrency Primitives in Intel 64 Assembly</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/16/infosec-the-product-design-correspondence/">The Security/Product Design Correspondence</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/12/the-operating-system-is-out-of-date/">Systems Past: the only 8 software innovations we actually use</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/davidad">@davidad</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'davidad',
            count: 10,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
Copyright &copy; 2014 - <a href="http://davidad.org">davidad</a> (David A. Dalrymple) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<a class="davidadlink" href="http://davidad.org" target="_blank"><div>a <span>davidad</span> production</div></a>


</body>
</html>
